# Sentiment Analysis Backend (Demo)

Backend en Spring Boot para an치lisis de sentimientos. Dise침ado para la Hackathon, con capacidad de operar en modo aislado (Mock) o integrado con IA (Python).

## 游 Quickstart (30 segundos)

1. **Requisitos**: Java 17+ y Maven (o Docker).
2. **Ejecutar**:
   ```bash
   # Windows (PowerShell)
   .\mvnw.cmd spring-boot:run
   
   # Linux/Mac
   ./mvnw spring-boot:run
   ```
3. **Probar**:
   ```bash
   curl -X POST http://localhost:8080/sentiment \
        -H "Content-Type: application/json" \
        -d "{\"text\": \"Este proyecto es incre칤ble\"}"
   ```

## 丘뙖잺 Modos de Ejecuci칩n

El backend se adapta autom치ticamente mediante la variable `SENTIMENT_MODE`.

### 1. Modo MOCK (Por defecto)
- **Config**: `SENTIMENT_MODE=mock`
- **Comportamiento**: No requiere Python. Devuelve respuestas simuladas (ideal para demos r치pidas o pruebas de UI).

### 2. Modo PYTHON (Real)
- **Config**: 
  - `SENTIMENT_MODE=python`
  - `PYTHON_API_URL=http://localhost:8000/predict`
- **Comportamiento**: Act칰a como proxy hacia el microservicio FastAPI para inferencia real con IA.

## 游니 Contrato de API

### POST `/sentiment`

**Request Body:**
```json
{
  "text": "Texto a analizar (m칤n 3 caracteres)"
}
```

Linux:
```bash
./mvnw -Dtest=SentimentControllerMockMvcTest test
**Response Body:**
```json
{
  "sentiment": "POSITIVO",  // [POSITIVO, NEGATIVO, NEUTRO]
  "score": 0.95
}
```

Si quieres correr todos los tests:
```bash
./mvnw test
```
## 游 Troubleshooting

---
- **Puerto 8080 ocupado**: Aseg칰rate de liberar el puerto o cambiar `server.port` en `application.properties`.
- **Error de conexi칩n**: Si est치s en modo `python`, verifica que el contenedor de FastAPI est칠 levantado (`docker ps`).

## Ejemplos curl
## 游냡 Docker

Texto v치lido (esperar 200):
Ejecutar todo el stack:
```bash
curl -i -X POST http://localhost:8080/sentiment \
  -H "Content-Type: application/json" \
  -d '{"text":"Este producto es la raja"}'
docker-compose up --build
```

Texto inv치lido (esperar 400):
```bash
curl -i -X POST http://localhost:8080/sentiment -H "Content-Type: application/json" -d '{}'
```

---

## Troubleshooting (errores comunes)

- "class file version 65.0 ... only recognizes up to 61.0": significa que compilaste con Java 21 pero la JVM que corre los tests es Java 17. Asegurate que `java -version` y `./mvnw -v` muestren Java 21.
- Si no puedes cambiar JAVA_HOME en el PC ahora, puedes correr los tests sin forking (workaround local):
  ```bash
  ./mvnw -Dsurefire.forkCount=0 -Dtest=SentimentControllerMockMvcTest test
  ```

---

## Contribuir / checklist dev4

- Crear tests MockMvc (ya hay un par en `src/test/...`).
- Documentar pasos en README (esto que est치s leyendo).
- Exportar colecci칩n Postman y subir a `postman/`.
- (Opcional) Dockerizar: `Dockerfile` + `docker-compose` para demo con placeholder del FastAPI.

## Endpoints
- **POST `/sentiment`**: Recibe un JSON `{"text": "..."}` y devuelve la predicci칩n.
- **GET `/health`**: Verifica si la API est치 en l칤nea.

## Requisitos
- Java 17
- Maven
- Python con FastAPI (Puerto 8000)

## Ejecuci칩n
```bash
./mvnw spring-boot:run 




An치lisis de los Resultados (QA Report)

    1. Prueba de Texto Positivo: 춰Lograda! El servidor respondi칩 un 200 OK y devolvi칩 el JSON esperado.

    2. Prueba de Validaci칩n (Texto Vac칤o): 춰Lograda y muy importante! Viste que sali칩 un HTTP/1.1 400. Esto significa que el trabajo del Dev 2 (validaciones) est치 funcionando: el sistema no se rompi칩, sino que le avis칩 al usuario que cometi칩 un error.

    3. Prueba de Texto Largo: 춰Lograda! El sistema proces칩 la cadena larga sin problemas de memoria o desbordamiento.